<!DOCTYPE html>
<html ng-app="shopModule">
	<head>
		<title>Mobile Shop</title>
		<link rel="stylesheet" href="css/bootstrap.min.css">
		<link rel="stylesheet" href="css/style.css">
		<script src="js/d3.min.js"></script>
		<script src="js/jquery-2.2.3.js"></script>
		<script src="js/bootstrap.min.js"></script>
		<script src="js/angular.min.js"></script>
		<script src="js/script.js"></script>
	</head>
	<body  ng-controller="mobiles">
		<h2>Mobile Shop Application</h2> 
	
		<input id="addNew" class="btn btn-default" type="button" value="Add New Mobile" ng-click="showAddScreen()"/>
		<div id="content">	
		<div class="form-group">
				<div class="col-sm-3">
					Model : <input class="form-control" type="text" placeholder="Model Search" ng-model="modelSearch.model"/>
				</div>
				<div class="col-sm-3">
					Brand : <select class="form-control" ng-model="brandSearch.brand" ng-click="clear()">
								<option ng-repeat="mobile in mobiles | limitTo:5" value="{{ mobile.brand }}">{{ mobile.brand }}</option>
							</select>
				</div>
				<div class="col-sm-3">
					<br><input class="btn btn-default" type="button" ng-click="search()" value="Search"/>
				</div>
		</div>
			<table class="table table-hover" style="width: 50%">
				<thead>
					<tr>
						<th>Brand</th>
						<th>Model</th>
						<th>Year</th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="mobile in mobiles | filter:tempModel | filter:tempBrand" ng-click="setSelected()">
						<td>{{ mobile.brand }}</td>
						<td>{{ mobile.model }}</td>
						<td>{{ mobile.year }}</td>
					</tr>
				</tbody>
			</table>
			
			<div id="details" ng-hide="showDetails"> 
				<ul ng-repeat="mobile in mobiles | filter:tempModel1 | filter:tempBrand1">
					- {{ mobile.brand }} {{ mobile.model }} -
					<li>{{ "Year : " + mobile.year }}</li>
					<li>{{ "Memory Size : " +  mobile.memory + "GB"}}</li>
					<li>{{ "Color : " +  mobile.color }}</li>
					<li>{{ "Dual SIM : " +  mobile.sim }}</li>
					<li>{{ "NFC : " +  mobile.nfc }}</li>
					<li>{{ "Network : " +  mobile.network }}</li>
					<li>{{ "Screen Size : " +  mobile.screen + '"' }}</li>

				</ul>
			</div>
	</div>
			<div class="form-group" id="addScreen" ng-model="addScreen" ng-show="addScreenStatus">
				<h2>Add Mobile</h2><br>
				<form id="formID" ng-submit="save()">
					<div class="col-sm-6">
						Model  <input type="text" class="form-control" placeholder="Model" ng-model="addModel" required><br>
					</div>
					<div class="col-sm-6">
						Manufacture Year  <input type="text" class="form-control" placeholder="Year" ng-model="addYear" required pattern="\d{4}"><br> 
					</div>
					<div class="col-sm-6">
						Brand <select class="form-control" ng-model="addBrand">
									<option ng-repeat="mobile in mobiles | limitTo:5" value="{{ mobile.brand }}">{{ mobile.brand }}</option>
							  </select><br> 
					</div>
					<div class="col-sm-6">						
						Memory <select class="form-control" ng-model="addMemory">
									<option value="16">16</option>
									<option value="32">32</option>
									<option value="64">64</option>
									<option value="128">128</option>
								</select><br>
					</div>
					<div class="col-sm-3">						
						<input type="checkbox" name="options" value="dual" ng-model="addDual" checked>Dual SIM<br>
						<input type="checkbox" name="options" value="nfc" ng-model="addNfc" checked>NFC<br>
						<input type="checkbox" name="options" value="4G" ng-model="add4G" checked>4G<br>
					</div>
					<div class="col-sm-3">							
						Screen <br><input type="radio" name="screen" value="4" ng-model="addScreen" checked> 4"<br>
							   <input type="radio" name="screen" value="5" ng-model="addScreen"> 5"<br>
							   <input type="radio" name="screen" value="6" ng-model="addScreen"> 6"<br>
					</div>
					<div class="col-sm-3">							
						Color <br><input type="radio" name="color" value="white" ng-model="addColor" checked> White<br>
							   <input type="radio" name="color" value="gold" ng-model="addColor"> Gold<br>
							   <input type="radio" name="color" value="black" ng-model="addColor"> Black<br>
					</div>	
					<div class="col-sm-3">		   
						<input class="form-control" type="button" value="Back" ng-click="back()">
						<input class="form-control" type="submit"  value="Save">
					</div>
				</form>
			</div>
		</div>
		<div id="d3">
				bar chart
				<svg class="chart">
				</svg>
				<script>
					y2012 = 4;
					y2013 = 0;
					y2014 = 0;
					y2015 = 0;
					y2016 = 0;
						for(i=0;i<mobiles.length;i++){
					       if(mobiles[i].year == 2012){
						   	y2012++ ;
						   }
					   }
					   for(i=0;i<mobiles.length;i++){
					       if(mobiles[i].year == 2013){
						   	y2013++ ;
						   }
					   }
					   for(i=0;i<mobiles.length;i++){
					   	if(mobiles[i].year == 2014){
						   	y2014++  ;
						   }
						} 
						
						for(i=0;i<mobiles.length;i++){
					       if(mobiles[i].year == 2015){
						   	y2015++ ;
						   }
					   }
					   for(i=0;i<mobiles.length;i++){
					   	if(mobiles[i].year == 2016){
						   	y2016++  ;
						   }
						}           
					
						var scale = {
						  y: d3.scale.linear()
						};
						
						var totalWidth = 500;
						var totalHeight = 200;
						
						scale.y.domain([0, 10]);
						scale.y.range([totalHeight, 0]);
						
						var ages = [y2012, y2013, y2014, y2015, y2016];
						var barWidth = 80;
						
						var chart = d3.select('.chart')
						    .attr({
						        'width': totalWidth,
						        'height': totalHeight
						    });
						
						var bars = chart
						    .selectAll('g')
						    .data(ages)
						    .enter()
						    .append('g');
						
						bars.append('rect')
						    .attr({
						        'x': function (d, i) {
						            return i * barWidth;
						        },
						        'y': scale.y,
						        'height': function (d) {
						            return totalHeight - scale.y(d);
						        },
						        'width': barWidth - 1
						    });
						    

						    
					</script>		
			</div>
	</body>
</html>